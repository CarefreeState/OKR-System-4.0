
# /web/wxlogin

ws://localhost:1701/web/wxlogin

## 1. 网页端展示小程序登录码

建立连接后，会返回一个json（后端会在一分钟后断开连接）

时效为1分钟，在一分钟内用户应该在小程序端扫码登录后，获取场景值进行下一步操作；

场景值示例：
* `secret=T1dH_S`

1. path：小程序码地址
2. secret：场景值

## 2. 小程序端确认登录
跳转到小程序的路径（如果需要更改请联系马铭胜）：`pages/confirm`；


将 `secret=T1dH_S` 作为路径参数请求这个接口（必须是在小程序登录下）

用户在小程序端访问这个接口后，服务器会给浏览器（刚才获得小程序码的地方）发一个消息（状态码为200），如果收到此消息，那么就可以断开连接，进行第三步了；



## 3. 网页端登录

在登录接口，选择授权登录策略，用获取小程序码时获得的 secret 去登录

